/**
 * Created with JetBrains PhpStorm.
 * User: alexboyce (curiosity26)
 * Date: 7/12/13
 * Time: 11:40 AM
 * License: GPLv2
 */
(function(){var e;var t=function(){if(document.querySelectorAll){var e=document.querySelectorAll("img[data-src]");(function(){for(var t=0;t<e.length;t++){var n=e[t];var r=n.getAttribute("data-src");if(r){n.src=r}}})()}else{(function(){for(var e=0;e<document.images.length;e++){var t=document.images[e];var n=t.getAttribute("data-src");if(n){t.src=n}}})()}};try{var n=function(n){var r=new Image;var i=this.img=document.querySelector("img[data-src='"+n+"']");r.onload=function(){var n=r.src.match(/\.([^\.]+)$/)[1]?r.src.match(/\.([^\.]+)$/)[1].toLowerCase():null;if(n=="svg"){return}try{var s=document.createElement("canvas");var o=s.getContext("2d");var u=r.height/r.width;if(r.width>window.outerWidth*e||e>1){var a=i.getAttribute("width")?Math.min(i.getAttribute("width"),r.width,window.outerWidth)*e:Math.min(r.width,window.outerWidth)*e;var f=a*u;var l="image/"+n.replace("jpg","jpeg");s.setAttribute("width",a);s.setAttribute("height",f);o.save();o.drawImage(r,0,0,a,f);o.restore();i.removeAttribute("data-src");var c;if(e>1&&s.toDataURLHD){if(n.replace("jpg","jpeg")=="jpg"){c=s.toDataURLHD(l,.5)}else{c=s.toDataURLHD(l)}}else{if(e>1&&n.replace("jpg","jpeg")=="jpg"){c=s.toDataURL(l,.5)}else{c=s.toDataURL(l)}}i.src=c}else{i.src=r.src}}catch(h){t()}};r.src=n};e=window.devicePixelRatio||window.webkitDevicePixelRatio||window.mozDevicePixelRatio||window.msDevicePixelRatio||window.oDevicePixelRatio||1;var r;var i=[];try{if(e&&(r=document.createElement("canvas"))){(function(){var e=document.querySelectorAll("img[data-src]");for(var t=0;t<e.length;t++){i.push(new n(e[t].getAttribute("data-src")))}})()}else{t()}}catch(s){t()}}catch(s){t()}})()
